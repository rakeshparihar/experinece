<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1, viewport-fit=cover" />
    <title>GlamAR Web SDK – Minimal Demo</title>

    <!-- Load GlamAR SDK (script-tag only) -->
    <script src="https://cdn.glamar.io/sdk/wrapper"></script>

    <style>
      html,
      body {
        height: 100%;
        margin: 0;
      }
      body {
        font-family: system-ui, -apple-system, Segoe UI, Roboto, sans-serif;
      }
      .toolbar {
        position: fixed;
        inset: auto 0 0 0;
        display: flex;
        gap: 8px;
        padding: 12px;
        background: rgba(255, 255, 255, 0.9);
        backdrop-filter: blur(6px);
        border-top: 1px solid #eee;
        z-index: 10001;
      }
      .toolbar button {
        padding: 10px 14px;
        border-radius: 10px;
        border: 1px solid #e2e8f0;
        cursor: pointer;
        font-weight: 600;
      }
      .toolbar button:hover {
        background: #f7f7f7;
      }
      #glamar-container {
        position: fixed;
        inset: 0;
        width: 100vw;
        height: 100vh;
        z-index: 1;
        background: #fff;
      }
    </style>
  </head>

  <body>
    <!-- Fullscreen container for SDK -->
    <div id="glamar-container"></div>

    <!-- Quick controls (optional) -->
    <div class="toolbar">
      <button id="btnOpen">Open Live</button>
      <button id="btnApplySku">Apply SKU</button>
      <button id="btnApplyCategory">Apply Category</button>
      <button id="btnClose">Close</button>
    </div>

    <script>
      // ======= Replace these with your real values =======
      const ACCESS_KEY = "2d5e01fd-2130-4b70-9071-f11ed3faec1b"; // required
      const DEFAULT_CATEGORY = "YOUR_DEFAULT_CATEGORY"; // e.g. "sunglasses", "lipstick", "skinanalysis"
      const SAMPLE_SKU = "AC000932039S26"; // any valid SKU that exists in your account
      // ===================================================

      // Basic safety checks
      if (
        !ACCESS_KEY ||
        ACCESS_KEY === "2d5e01fd-2130-4b70-9071-f11ed3faec1b"
      ) {
        console.error(
          "GlamAR: Missing ACCESS_KEY. Replace the placeholder before testing."
        );
      }

      // Initialize on DOM ready
      document.addEventListener("DOMContentLoaded", () => {
        // Minimal, correct config (no undocumented blocks)
        const options = {
          platform: "web",
          category: DEFAULT_CATEGORY,
          configuration: {
            global: {
              openLiveOnInit: true, // auto open camera on init (flip to false if you prefer manual open)
              disableClose: false,
              disableBack: false,
            },
            ui: {
              loader: {
                // correct key is "disable" (not "disabled")
                disable: false, // set true to hide built-in loader
                // jsonData: {},              // optional Lottie JSON
                // backgroundColor: "#FFFFFF" // optional
              },
              watermark: {
                text: "",
                fontColor: "",
                logo: "",
              },
            },
            ar: {
              // Controls 3D viewer UI when a 3D-enabled SKU is applied
              disable3DUI: false,
            },
          },
          meta: {
            sdkVersion: "2.0.0",
          },
        };

        // Init
        window.GlamAR.init("glamar-container", ACCESS_KEY, options);

        // Recommended baseline listeners
        window.GlamAR.addEventListener("*", (event, payload) => {
          console.log("[GlamAR Event]", event, payload || "");
        });

        window.GlamAR.addEventListener("loaded", () => {
          console.log("GlamAR loaded — ready.");
        });

        window.GlamAR.addEventListener("error", (err) => {
          console.error("GlamAR error:", err);
        });

        // Controls
        document.getElementById("btnOpen").onclick = () => {
          if (window.GlamAR && typeof window.GlamAR.open === "function") {
            window.GlamAR.open();
          }
        };

        document.getElementById("btnApplySku").onclick = () => {
          if (window.GlamAR && typeof window.GlamAR.applyBySku === "function") {
            window.GlamAR.applyBySku(SAMPLE_SKU);
          }
        };

        document.getElementById("btnApplyCategory").onclick = () => {
          if (
            window.GlamAR &&
            typeof window.GlamAR.applyByCategory === "function"
          ) {
            // Example: apply a subcategory like "sunglasses", "lipstick", etc.
            window.GlamAR.applyByCategory(DEFAULT_CATEGORY);
          }
        };

        document.getElementById("btnClose").onclick = () => {
          if (window.GlamAR && typeof window.GlamAR.close === "function") {
            window.GlamAR.close();
          }
        };
      });
    </script>
  </body>
</html>
